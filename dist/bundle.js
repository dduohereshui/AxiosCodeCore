(()=>{"use strict";function e(){this.handlers=[]}function t(e){return new Promise(((e,t)=>{setTimeout((()=>{e({name:"cjl",age:20})}),2e3)}))}function s(t){this.defaults=t,this.interceptors={request:new e,response:new e}}function o(e,t,s=e){if(t)for(const o in t)t.hasOwnProperty(o)&&("function"==typeof t[o]?e[o]=t[o].bind(s):e[o]=t[o]);return e}function r(e){const t=new s(e),r=s.prototype.request.bind(t);return o(r,s.prototype,t),o(r,t),r}e.prototype.use=function(e,t){this.handlers.push({fulfilled:e,rejected:t})},s.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},e=Object.assign({},this.defaults,e),console.log(this.interceptors);let s=Promise.resolve();const o=[t,void 0];for(console.log(this.interceptors),this.interceptors.request.handlers.length&&this.interceptors.request.handlers.reverse().forEach((e=>{o.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.handlers.length&&this.interceptors.response.handlers.forEach((e=>{o.push(e.fulfilled,e.rejected)})),console.log(o);o.length;)s=s.then(o.shift(),o.shift());return console.log(e,"要去发送请求了"),s},["get","post","head","delete"].forEach((e=>{s.prototype[e]=function(...e){return this.request(...e)}}));const n=r({timeout:0});n.Axios=s,n.create=function(e){return r(e)};const i=n,c=(document.getElementById("send"),i.create({baseURL:"http://localhost:3000/"}));c.interceptors.request.use((e=>(console.log("1 request interceptor"),e)),(e=>e)),c.interceptors.request.use((e=>(console.log("2 request interceptor"),e)),(e=>e)),c.interceptors.response.use((e=>(console.log("1 response interceptor"),e)),(e=>e)),c.interceptors.response.use((e=>(console.log("2 response interceptor"),e)),(e=>e)),c.get({url:"/getUser",method:"get",timeout:4e3}).then((e=>{console.log(e)}))})();